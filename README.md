# IBM Cluster example

This example shows how to create a Kubernetes VPC Cluster under a specified resource group id, with default worker node with given zone and subnets.
To have a multizone cluster, update the zones with new zone-name and subnet-id.
It also creates a additional worker pool on different zone. After successfull creation of cluster it binds the cloud-object-storage service.
To run, configure your IBM Cloud provider

## Outputs generated by the terraform.

`cluster id`

You will then need to do the following in order to connect to your cluster.

Download and install a few CLI tools and the Kubernetes Service plug-in

`curl -sL https://ibm.biz/idt-installer | bash`

Log in to your IBM Cloud account. Include the --sso option if using a federated ID.

`ibmcloud login -a cloud.ibm.com -r us-south -g default`

Download the kubeconfig files for your cluster.

`ibmcloud ks cluster config --cluster <cluster id>`

Set the KUBECONFIG environment variable. Copy the output from the previous command and paste it in your terminal. The command output looks similar to the following example:

`export KUBECONFIG=/Users/$USER/.bluemix/plugins/container-service/clusters/bpn520od0omeqkq72au0/kube-config-dal10-mycluster9beb.yml`

Verify that you can connect to your cluster.

`kubectl version --short`

## Running the example

For planning phase

```shell
terraform plan
```

For apply phase

```shell
terraform apply
```

For destroy

```shell
terraform destroy
```
